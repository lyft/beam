name: beam
description: Lyft version of Apache Beam python package
repository: git@github.com:lyft/beam.git
slack: '#noop'
team_email: 'no-reply@lyft.com'
deploy:
  - name: staging
    legacy: true
    role: lyftpypi-staging-iad-deploy
  - name: production
    legacy: true
    role: lyftpypi-production-iad-deploy
    automatic: true
languages:
  - python
image_type: library

builder:
  name: multi
  params:
    builders:
      - name: docker_build
      - name: s2i
        params:
          builder: 'lyft/s2ijava:java8.e774281c1906c7f8882cfeb5886cadf04dba44c2'
          sub_image: flink-jobserver
          buildargs:
            - "BUILD_COMMAND=./gradlew :runners:flink:1.8:job-server:publish -PisRelease -PnoSigning -PdistMgmtSnapshotsUrl=https://jarjarflinks.jfrog.io/jarjarflinks/libs-release -PdistMgmtServerId=lyft-releases --no-parallel --no-daemon"
